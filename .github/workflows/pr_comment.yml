name: PR Comment Sample
on: pull_request
# on:
#   pull_request:
#     types: [opened]
jobs:
  pr_comment_sample:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - name: Extract branch name
        shell: bash
        run: echo "::set-output name=branch::${GITHUB_REF#refs/heads/}"
        id: extract_branch
      - name: Comment PR
        uses: thollander/actions-comment-pull-request@v1
        with:
          message: |
            [link sample](http://example.com/${{ steps.extract_branch.outputs.branch }})
            [$GITHUB_REF_NAME](GITHUB_REF_NAME)
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      - uses: actions/github-script@v5
        env:
          BRANCH_NAME: ${{ steps.extract_branch.outputs.branch }}
          GITHUB_REF_NAME: ${GITHUB_REF_NAME}
          GITHUB_REF: ${GITHUB_REF}
        with:
          github-token: ${{secrets.GITHUB_TOKEN}}
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: '${BRANCH_NAME}\n${GITHUB_REF_NAME}\n${GITHUB_REF}'
            })
